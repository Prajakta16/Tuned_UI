<app-header [loggedIn]="true" [showUsername]="'Aishwarya'"></app-header>
<div class="container emp-profile" >
  <form method="post">
    <div class="row">
      <div class="col-md-4">
        <div class="profile-img">
          <img
            src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS52y5aInsxSm31CvHOFHWujqUx_wWTS9iM6s7BAm21oEN_RiGoog"
            alt="" />
        </div>
      </div>
      <div class="col-md-6">
        <div class="profile-head">
          <h5>
            {{person.name}}
          </h5>
          <h6>
            {{person.type}}
          </h6>
          <p class="proile-rating" *ngIf="person.type==='Artist'">
            Popularity : <span>8/10</span>
          </p>
          

          <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home"
                aria-selected="true">About</a>
            </li>
            <li class="nav-item" *ngIf="!isSelf">
              <a class="nav-link" id="follower-tab" data-toggle="tab" href="#follower" role="tab" aria-controls="follower"
                aria-selected="false">Followers</a>
            </li>
            <li class="nav-item" *ngIf="!isSelf">
              <a class="nav-link" id="following-tab" data-toggle="tab" href="#following" role="tab" aria-controls="following"
                aria-selected="false">Following</a>
            </li>
            <li class="nav-item" *ngIf="!isSelf">
              <a class="nav-link" id="album-tab" data-toggle="tab" 
              href="#albums" role="tab" aria-controls="albums" *ngIf="person.type === 'Artist'"
                aria-selected="false">Albums</a>
              <a class="nav-link" id="playlists-tab" data-toggle="tab" 
              href="#playlists" role="tab" aria-controls="playlists" *ngIf="person.type === 'Listener'"
                aria-selected="false">Playlists</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="col-md-2" *ngIf="isSelf && !editMode ; else followSection">
        <button type="submit" class="btn btn-outline-secondary" (click)="setEditMode()"
         name="btnEdit">
          Edit Profile
        </button>
      </div>
      <ng-template #followSection>
        <div>
          <button type="submit" class="btn btn-outline-secondary" 
           name="btnFollow">
            Follow
          </button>
        </div>
      </ng-template>
      
    </div>
    <div class="row">
      <div class="col-md-4">
        <div class="profile-work">
          <p>WORK LINK</p>
          <a href="">Website Link</a><br />
          <a href="">Bootsnipp Profile</a><br />
          <a href="">Bootply Profile</a>
          <p>SKILLS</p>
          <a href="">Web Designer</a><br />
          <a href="">Web Developer</a><br />
          <a href="">WordPress</a><br />
          <a href="">WooCommerce</a><br />
          <a href="">PHP, .Net</a><br />
        </div>
      </div>
      <div class="col-md-8">
        <div class="tab-content profile-tab container-details" id="myTabContent">
          <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
            <div class="row">
              <div class="col-md-6">
                <label>Email</label>
              </div>
              <div class="col-md-6">
                <p *ngIf="!editMode">{{person.email}}</p>
                <input type="text" class="form-control input-style" id="email5"
                name="field1"
                *ngIf="editMode" value="{{person.email}}"
                [(ngModel)]="person.email">

              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <label>HELP</label>
              </div>
              <div class="col-md-6">
                <p *ngIf="!editMode">{{person.help}}</p>
                <input type="text" class="form-control input-style" id="phone4"
                *ngIf="editMode"   value="{{person.help}}" name="field2"
                [(ngModel)]="person.help">
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <label>Email</label>
              </div>
              <div class="col-md-6">
                <p *ngIf="!editMode">{{person.email}}</p>
                <input type="text" class="form-control input-style" id="email3" name="field3" 
                [(ngModel)] = "person.email" *ngIf="editMode"  value="{{person.email}}"
                >
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <label>Phone</label>
              </div>
              <div class="col-md-6">
                <p *ngIf="!editMode">{{person.phone}}</p>
                <input type="text" class="form-control input-style" id="email2" name="field4"
                *ngIf="editMode"  value="{{person.phone}}"
                [(ngModel)]="person.email">
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <label>Profession</label>
              </div>
              <div class="col-md-6">
                <p *ngIf="!editMode">{{person.phone}}</p>
                <input type="text" class="form-control input-style" id="email1" name="field5"
                *ngIf="editMode"  value="{{person.email}}"
                [(ngModel)]="person.email">
              </div>
            </div>
            <div class="row savbtn" *ngIf="editMode">
              <button class="btn btn-outline-secondary" name="btn-save"
              (click)="saveProfileDetails()">Save</button>
            </div>
          </div>

          <!--- For followers--->
          <div class="tab-pane fade container-details" id="follower" role="tabpanel"
          aria-labelledby="follower-tab">
            
            <ul class="list-group">
              <li class="list-group-item list-override" *ngFor = "let follower of person.followers index as i">
                  <div class="list-item">
                      <div>
                         {{follower.name}}
                      </div>
                      <div class="btn-group" role="group" aria-label="Basic example">
                          <button type="button" class="btn btn-sm btn-outline-secondary"
                          (click)="navigateToProfile(follower.id)">
                              View Profile
                          </button>
                          <button type="button" class="btn btn-sm btn-outline-secondary">
                              following
                          </button>
                      </div>
                  </div>
              </li>
            </ul>
          </div>

          <!--- For followings--->
          <div class="tab-pane fade container-details" id="following" role="tabpanel" aria-labelledby="following-tab">
            
            <ul class="list-group">
              <li class="list-group-item list-override" *ngFor = "let following of person.followings index as i">
                  <div class="list-item">
                      <div>
                          {{following.name}}
                      </div>
                      <div class="btn-group" role="group" aria-label="Basic example">
                          <button type="button" class="btn btn-sm btn-outline-secondary"
                          (click)="navigateToProfile(following.id)">
                              View Profile
                          </button>
                          <button type="button" class="btn btn-sm btn-outline-secondary">
                              following
                          </button>
                      </div>
                  </div>
              </li>
            </ul>
          </div>

          <!-- For Albums -->
          <div class="tab-pane fade container-details" id="albums" role="tabpanel"
          aria-labelledby="album-tab">
            
            <ul class="list-group">
              <li class="list-group-item list-override" *ngFor = "let album of person.albums index as i">
                  <div class="list-item">
                      <div>
                          {{album.name}}
                      </div>
                      <button type="button" class="btn btn-sm btn-outline-secondary"
                      data-toggle="modal" (click) = "setModalData(i, 'albums')"
                      [attr.data-target]="'#'+person.dataType+'Modal'">
                              View 
                      </button>
                  </div>
              </li>
            </ul>
          </div>

        </div>
      </div>
    </div>
  </form>
</div>

<div class="modal fade" [attr.id]="person.dataType+'Modal'" tabindex="-1" role="dialog" data-backdrop="static"
    aria-labelledby="dataModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered " role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="dataModalLabel">{{ categories.name}}</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="songsByCategory">
            <div id="accordion">
              <div class="card" *ngFor="let category of categories.songs; index as i">
                <div class="card-header" [attr.id]="'category'+i">
                  <div class="mb-0 category-header">
                      {{category.name}} 
                    <button class="btn btn-sm btn-outline-secondary"
                     data-toggle="collapse" [attr.data-target]="'#collapse'+i" 
                    aria-expanded="false" [attr.aria-controls]="'collapse'+i" (click)="openDetails(category)">
                      <!-- <fa-icon [icon]="category.arrow"></fa-icon> -->
                       {{category.arrow}}   
                    </button>
                  </div>
                </div>
          
                <div [attr.id]="'collapse'+i" class="collapse row category-body" [attr.aria-labelledby]="'category'+i" 
                  data-parent="#accordion">
                  
                  <div class="col-md-6">
                    Test datat
                  </div>
                  <div class="col-md-6">
                    Test datat
                  </div>
                  
             
                </div>
              </div>
            </div>
          
          </div>
         
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary"
          data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

